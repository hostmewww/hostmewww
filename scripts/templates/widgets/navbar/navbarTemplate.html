<nav class="navbar navbar-default navbar-collapse" data-bind="with: root(), widget: {}">
    <ul class="nav navbar-nav" data-bind="foreach: nodes(), css: { 'navbar-right': $component.alignRight }">
        <!--ko if: nodes().length > 0 -->
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" data-bind="attr: { href: url }">
                <span data-bind="text: label"></span>
                <span class="caret"></span>
            </a>
            <!--ko template: { name: 'navigationItemTemplate', data: $data }--><!--/ko-->
        </li>
        <!--/ko-->
        <!--ko ifnot: nodes().length > 0 -->
        <li data-bind="css: {active: isActive()}, click: $parent.setActive">
            <a data-bind="text: label, attr: { href: url }"></a>
        </li>
        <!--/ko-->
    </ul>
</nav>

<script id="navigationItemTemplate" type="text/html">
    <ul class="dropdown-menu" data-bind="foreach: nodes()">
        <!--ko if: nodes().length > 0 -->
        <li class="dropdown dropdown-submenu">
            <a class="dropdown-toggle" data-toggle="dropdown" data-bind="attr: { href: url }">
                <span data-bind="text: label"></span>
                <!--<span class="caret"></span>-->
            </a>
            <!--ko template: { name: 'ttt', data: $data }--><!--/ko-->
        </li>
        <!--/ko-->
        <!--ko ifnot: nodes().length > 0 -->
        <li>
            <a data-bind="text: label, attr: { href: url }"></a>
        </li>
        <!--/ko-->
    </ul>
</script>